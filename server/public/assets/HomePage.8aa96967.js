import{r as F,w as E,a as x,b as _,o as s,c as u,d as l,e as d,f as g,u as p,g as h,h as y,T as J,F as k,_ as C,i as M,n as B,t as v,j as L,k as j,l as S}from"./index.fbeb4c8b.js";import{J as z,r as U,a as w}from"./jobs.api.ad316905.js";function O(){const e=F(!1);return E(e,()=>{e.value?document.body.classList.add("is-lock-scroll"):document.body.classList.remove("is-lock-scroll")}),{isOpenModal:e}}const N={key:0,class:"modal"},V={class:"mblock"},I={class:"mblock__top"},T=l("div",{class:"mblock__divider"},null,-1),A={class:"mblock__body"},P=l("span",null,"Full Time Only",-1),Q=l("span",null,"Search",-1),H={__name:"ModalFilterJobs",emits:["update:filter"],setup(e,{emit:n}){const t=x({isFulltime:!1,location:""}),{isOpenModal:o}=O(),a=i=>{const r=i?Object.assign(t,i):t;n("update:filter",r)};return(i,r)=>{const f=_("SvgIcon"),m=_("InputEl"),c=_("CheckboxEl"),$=_("ButtonEl");return s(),u(k,null,[l("div",{class:"filter__fulltime-icon-filter",onClick:r[0]||(r[0]=b=>o.value=!0)},[d(f,{name:"filter",class:"icon-filter"})]),(s(),g(J,{to:"body"},[p(o)?(s(),u("div",N,[l("div",{class:"modal__backdrop",onClick:r[1]||(r[1]=b=>o.value=!1)}),l("div",V,[l("div",I,[d(m,{value:t.location,"onUpdate:value":r[2]||(r[2]=b=>t.location=b),valueModifiers:{trim:!0},class:"modal-location",iconName:"location",placeholder:"Filter by location\u2026",onEnter:a,onClear:r[3]||(r[3]=b=>a({location:""}))},null,8,["value"])]),T,l("div",A,[d(c,{checked:t.isFulltime,"onUpdate:checked":r[4]||(r[4]=b=>t.isFulltime=b)},{default:h(()=>[P]),_:1},8,["checked"]),d($,{onClick:a,class:"mblock__btn"},{default:h(()=>[Q]),_:1})])])])):y("",!0)]))],64)}}};const q={class:"filter"},D={class:"filter__row"},R=l("div",{class:"filter__divider"},null,-1),G=l("div",{class:"filter__divider"},null,-1),K={class:"filter__fulltime"},W=l("span",{class:"filter__fulltime-title"},[M(" Full Time "),l("span",null,"Only")],-1),X=l("span",null,"Search",-1),Y={__name:"FilterJobs",emits:["update:filter"],setup(e,{emit:n}){const t=x({position:"",location:"",isFulltime:!1}),o=a=>{const i=a?Object.assign(t,a):t;n("update:filter",i)};return(a,i)=>{const r=_("InputEl"),f=_("CheckboxEl"),m=_("ButtonEl");return s(),u("div",q,[l("div",D,[d(r,{value:t.position,"onUpdate:value":i[0]||(i[0]=c=>t.position=c),valueModifiers:{trim:!0},class:"filter-position filter-radius",iconName:"search",placeholder:"Filter by position",onEnter:o,onClear:i[1]||(i[1]=c=>o({position:""}))},null,8,["value"]),R,d(r,{value:t.location,"onUpdate:value":i[2]||(i[2]=c=>t.location=c),valueModifiers:{trim:!0},class:"filter-location filter-radius",iconName:"location",placeholder:"Filter by location\u2026",onEnter:o,onClear:i[3]||(i[3]=c=>o({location:""}))},null,8,["value"]),G,l("div",K,[d(f,{checked:t.isFulltime,"onUpdate:checked":i[4]||(i[4]=c=>t.isFulltime=c)},{default:h(()=>[W]),_:1},8,["checked"]),d(H,{"onUpdate:filter":o}),d(m,{class:"filter__fulltime-search",onClick:o},{default:h(()=>[X,d(C,{name:"search",class:"icon-search-sm"})]),_:1})])])])}}};const Z={class:"card__top"},ee={class:"card__posted"},te=l("div",{class:"card__divider divider"},null,-1),oe={class:"card__contract"},ie={class:"card__position title-h3"},le={class:"card__company"},ae={class:"card__location location"},re={__name:"CardJobs",props:{job:{type:Object,default:()=>new z}},setup(e){return(n,t)=>{const o=_("LogoSvg"),a=_("router-link");return s(),g(a,{to:`/jobs/${e.job.id}`,class:"card"},{default:h(()=>[e.job.logo.length?(s(),u("div",{key:0,class:"card__logo",style:B({background:e.job.logoBackground})},[d(o,{name:p(U)(e.job.logo)},null,8,["name"])],4)):y("",!0),l("div",Z,[l("div",ee,v(e.job.postedAt),1),te,l("div",oe,v(e.job.contract),1)]),l("div",ie,v(e.job.position),1),l("div",le,v(e.job.company),1),l("div",ae,v(e.job.location),1)]),_:1},8,["to"])}}};const ne={key:1,class:"jobs"},se={class:"jobs__in"},de={__name:"ListJobs",props:{jobs:{type:Array,default:()=>[]}},setup(e){return(n,t)=>{const o=_("LoaderBase");return e.jobs.length?(s(),u("div",ne,[l("div",se,[(s(!0),u(k,null,L(e.jobs,a=>(s(),g(re,{key:a.id,job:a},null,8,["job"]))),128))])])):(s(),g(o,{key:0}))}}};class ce{static serializeFilterQuery(n){const{location:t,position:o,isFulltime:a}=n,i=new URLSearchParams;return t.trim()!==""&&i.append("location",t),o.trim()!==""&&i.append("position",o),a&&i.append("contract","Full Time"),i.toString()}}class _e{static async filter(n){const t=ce.serializeFilterQuery(n),o=await w.filter(t);return o.type==="success"&&!o.data.length&&Object.assign(o,{type:"error",data:null,error:"Jobs not found"}),o}}function ue(){const e=x({jobs:[],limit:8,error:null}),n=j(i),t=j(()=>n.value<e.jobs&&!e.error);async function o(r){const{type:f,data:m,error:c}=r?await _e.filter(r):await w.getAll();if(f==="error")return e.error=c;e.error=null,e.jobs=m}function a(){e.limit+=4}function i(){return e.jobs.length<e.limit?e.jobs:e.jobs.slice(0,e.limit)}return{state:e,visibleJobs:n,isVisibleLoadMore:t,fetchJobs:o,loadMore:a}}const pe={key:0,class:"error-msg title-h1"},me={key:2,class:"load-more"},ve={__name:"HomePage",setup(e){const{state:n,visibleJobs:t,isVisibleLoadMore:o,fetchJobs:a,loadMore:i}=ue();return S(a),(r,f)=>{const m=_("ButtonEl");return s(),u(k,null,[d(Y,{"onUpdate:filter":p(a)},null,8,["onUpdate:filter"]),p(n).error?(s(),u("div",pe,v(p(n).error),1)):(s(),g(de,{key:1,jobs:p(t)},null,8,["jobs"])),p(o)?(s(),u("div",me,[d(m,{title:"Load more",onClick:p(i),class:"load-more__btn"},null,8,["onClick"])])):y("",!0)],64)}}};export{ve as default};
